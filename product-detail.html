<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>جزئیات محصول | پوشاک سپهر</title>
  <link rel="stylesheet" href="css/style.css">
  <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

  <!-- 🔝 Header -->
  <header class="header">
    <div class="header-top">
      <div class="logo">
        <i class="fas fa-crown"></i>
        <span>پوشاک سپهر</span>
      </div>
      <div class="header-actions">
        <button id="cartBtn" class="btn btn-outline">
          <i class="fas fa-shopping-bag"></i>
          <span id="cartCount">0</span>
        </button>
      </div>
    </div>
    <nav class="navbar">
      <ul class="nav-menu">
        <li><a href="index.html" class="nav-link">خانه</a></li>
        <li><a href="products.html" class="nav-link">محصولات</a></li>
        <li><a href="about.html" class="nav-link">درباره ما</a></li>
        <li><a href="contact.html" class="nav-link">تماس با ما</a></li>
      </ul>
    </nav>
  </header>

  <!-- 📌 Product Detail -->
  <section class="container" style="margin:2rem 0">
    <div id="productDetail" style="display:flex;flex-wrap:wrap;gap:2rem;align-items:flex-start"></div>
  </section>

  <!-- 👣 Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div>
        <div class="footer-logo"><i class="fas fa-crown"></i> پوشاک سپهر</div>
        <p>۵ سال تجربه در عرضه پوشاک باکیفیت</p>
      </div>
      <div>
        <h3>لینک‌ها</h3>
        <ul>
          <li><a href="index.html">خانه</a></li>
          <li><a href="products.html">محصولات</a></li>
          <li><a href="contact.html">تماس با ما</a></li>
        </ul>
      </div>
      <div>
        <h3>ارتباط</h3>
        <p><i class="fas fa-phone"></i> 09184740946</p>
        <p><i class="fas fa-envelope"></i> sepehrkur@gmail.com</p>
      </div>
    </div>
  </footer>

  <!-- 🛒 Cart Sidebar -->
  <aside id="cartSidebar" class="cart-sidebar">
    <div class="cart-header">
      <h3>سبد خرید</h3>
      <button id="closeCart"><i class="fas fa-times"></i></button>
    </div>
    <div id="cartItems" class="cart-items"></div>
    <div class="cart-footer">
      <div>جمع کل: <span id="cartTotal">0 تومان</span></div>
      <a href="checkout.html" class="btn btn-primary" style="margin-top:1rem;width:100%">تکمیل خرید</a>
    </div>
  </aside>

  <!-- 📜 Scripts -->
  <script src="js/products.js"></script>
  <script src="js/product-loader.js"></script>
  <script src="js/script.js"></script>
  <script>
    // نمایش جزئیات محصول
    function getProductById(id) {
      return products.find(p => p.id === id);
    }

    function renderProductDetail() {
      const params = new URLSearchParams(window.location.search);
      const id = parseInt(params.get("id"));
      const product = getProductById(id);

      const container = document.getElementById("productDetail");
      if (!product) {
        container.innerHTML = "<p>محصولی یافت نشد.</p>";
        return;
      }

      container.innerHTML = `
        <div style="flex:1;min-width:300px">
          <img src="${product.image}" alt="${product.name}" 
               style="width:100%;border-radius:var(--radius);box-shadow:var(--shadow)">
        </div>
        <div style="flex:1;min-width:280px">
          <h1 style="margin-bottom:1rem">${product.name}</h1>
          <div class="product-price">
            <span class="current-price">${formatPrice(product.price)} تومان</span>
            ${product.oldPrice ? `<span class="old-price">${formatPrice(product.oldPrice)} تومان</span>` : ""}
          </div>
          <p style="margin:1rem 0">${product.description || "بدون توضیحات."}</p>
          <button class="btn btn-primary" onclick="addToCart(${product.id})">
            افزودن به سبد خرید
          </button>
        </div>
      `;
    }

    document.addEventListener("DOMContentLoaded", renderProductDetail);
  </script>
</body>
</html>
