<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>پوشاک سپهر - فروشگاه تخصصی پوشاک بچه‌گانه</title>
    <meta name="description" content="فروشگاه اینترنتی پوشاک سپهر - ارائه بهترین پوشاک بچه‌گانه با کیفیت عالی">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-top">
                <div class="logo">
                    <i class="fas fa-crown"></i>
                    <span>پوشاک سپهر</span>
                </div>
                
                <div class="header-actions">
                    <div class="search-box">
                        <input type="text" placeholder="جستجوی محصولات..." id="searchInput">
                        <button class="search-btn"><i class="fas fa-search"></i></button>
                        <div class="search-results" id="searchResults"></div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="action-btn" id="wishlistBtn">
                            <i class="far fa-heart"></i>
                            <span class="action-count" id="wishlistCount">0</span>
                        </button>
                        
                        <button class="action-btn" id="cartBtn">
                            <i class="fas fa-shopping-bag"></i>
                            <span class="action-count" id="cartCount">0</span>
                        </button>
                        
                        <button class="action-btn" id="userBtn">
                            <i class="far fa-user"></i>
                        </button>
                    </div>
                </div>
            </div>

            <nav class="navbar">
                <ul class="nav-menu">
                    <li><a href="index.html" class="nav-link active">خانه</a></li>
                    <li class="nav-dropdown">
                        <a href="products.html" class="nav-link">محصولات <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-menu">
                            <button class="god_btn">
                            <a href="products.html?category=دخترانه" class="boy_p"><img src="./images/woman.jpg" alt="" width="100px"></a>
                            </button>
                            <button class="god_btn">
                            <a href="products.html?category=پسرانه" class="boy_p"> <img src="./images/boy.jpg" alt="" width="100px"></a>
                            </button>
                            <button class="god_btn">
                            <a href="products.html?category=نوزادی" class="boy_p"><img src="./images/baby.jpg" alt="" width="100px"></a>
                            </button>
                            <button class="god_btn">
                            <a href="products.html?category=اکسسوری" class="boy_p"><img src="./images/acss.jpg" alt="" width="100px"></a>
                            </button>
                        </div>
                    </li>
                    <li><a href="products.html?discount=true" class="nav-link">تخفیف‌های ویژه</a></li>
                    <li><a href="about.html" class="nav-link">درباره ما</a></li>
                    <li><a href="contact.html" class="nav-link">تماس با ما</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-slider">
            <div class="slide active">
                <div class="slide-content">
                    <h1>مجموعه جدید پاییز و زمستان 1405</h1>
                    <p>مناسب برای تمام سلیقه‌ها با کیفیت بی‌نظیر</p>
                    <div class="hero-buttons">
                        <button class="btn btn-primary" onclick="window.location.href='products.html'">مشاهده محصولات</button>
                        <button class="btn btn-outline">درباره ما</button>
                    </div>
                </div>
                <div class="slide-image">
                    <img src="https://images.unsplash.com/photo-1489987707025-2c9bc64c4776?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80" alt="پوشاک بچه‌گانه">
                </div>
            </div>
        </div>
    </section>

    <!-- Featured Products -->
    <section class="featured-products">
        <div class="container">
            <div class="section-header">
                <h2>محصولات ویژه</h2>
                <p>برترین محصولات ما</p>
            </div>
            
            <div class="products-grid" id="featuredProducts">
                <!-- محصولات از طریق JavaScript لود می‌شوند -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <i class="fas fa-crown"></i>
                        <span>پوشاک سپهر</span>
                    </div>
                    <p>فروشگاه اینترنتی پوشاک سپهر با بیش از 5 سال سابقه در زمینه ارائه پوشاک با کیفیت و قیمت مناسب</p>
                </div>
                
                <div class="footer-section">
                    <h3>لینک‌های سریع</h3>
                    <ul>
                        <li><a href="index.html">خانه</a></li>
                        <li><a href="products.html">محصولات</a></li>
                        <li><a href="about.html">درباره ما</a></li>
                        <li><a href="contact.html">تماس با ما</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>تماس با ما</h3>
                    <div class="contact-info">
                        <p><i class="fas fa-phone"></i> 09184740946</p>
                        <p><i class="fas fa-envelope"></i> sepehrkur@gmail.com</p>
                        <a href="admin-login.html" style="color: #667eea; margin-top: 10px; display: inline-block;">ورود مدیران</a>
                    </div>
                </div>
            </div>
        </div>

        
    </footer>

    <script src="js/script.js"></script>
    <script>
        // لود محصولات از سرور
        async function loadFeaturedProducts() {
            try {
                const response = await fetch('api/products.php?featured=true');
                const products = await response.json();
                
                const container = document.getElementById('featuredProducts');
                if (container && products.length > 0) {
                    container.innerHTML = products.map(product => `
                        <div class="product-card">
                            <div class="product-image">
                                <img src="${product.images[0]}" alt="${product.name}" onerror="this.src='https://via.placeholder.com/300x300?text=تصویر+موجود+نیست'">
                                <div class="product-actions">
                                    <button class="action-btn" onclick="sepahrShop.addToCart(${product.id})">
                                        <i class="fas fa-shopping-cart"></i>
                                    </button>
                                    <button class="action-btn" onclick="sepahrShop.addToWishlist(${product.id})">
                                        <i class="far fa-heart"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="product-content">
                                <h3 class="product-title">${product.name}</h3>
                                <span class="product-category">${product.category}</span>
                                <div class="product-price">
                                    <span class="current-price">${sepahrShop.formatPrice(product.price)} تومان</span>
                                    ${product.oldPrice ? `<span class="old-price">${sepahrShop.formatPrice(product.oldPrice)} تومان</span>` : ''}
                                </div>
                                <button class="add-to-cart" onclick="sepahrShop.addToCart(${product.id})">
                                    <i class="fas fa-shopping-cart"></i>
                                    افزودن به سبد خرید
                                </button>
                            </div>
                        </div>
                    `).join('');
                }
            } catch (error) {
                console.error('خطا در لود محصولات:', error);
            }
        }

        document.addEventListener('DOMContentLoaded', loadFeaturedProducts);
    </script>
    <div id="simpleCart" style="display: none; position: fixed; top: 0; right: 0; width: 350px; height: 100%; background: white; box-shadow: -5px 0 15px rgba(0,0,0,0.3); z-index: 1000; padding: 20px; overflow-y: auto;">
    <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 20px; border-bottom: 2px solid #eee; padding-bottom: 10px;">
        <h3 style="margin: 0;">🛒 سبد خرید شما</h3>
        <button onclick="closeSimpleCart()" style="background: red; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">بستن</button>
    </div>
    
    <div id="simpleCartItems">
        <!-- آیتم های سبد خرید اینجا نمایش داده می شوند -->
    </div>
    
    <div style="margin-top: 20px; padding-top: 20px; border-top: 2px solid #eee;">
        <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 18px;">
            <span>جمع کل:</span>
            <span id="simpleCartTotal">0 تومان</span>
        </div>
        <button onclick="window.location.href='checkout.html'" style="width: 100%; padding: 12px; background: #4CAF50; color: white; border: none; border-radius: 8px; margin-top: 15px; cursor: pointer;">
            ✅ تکمیل سفارش
        </button>
    </div>
   
</div>



<script>
// تابع های ساده برای سبد خرید
function showSimpleCart() {
    updateSimpleCart();
    document.getElementById('simpleCart').style.display = 'block';
}

function closeSimpleCart() {
    document.getElementById('simpleCart').style.display = 'none';
}

function updateSimpleCart() {
    const cart = JSON.parse(localStorage.getItem('sepahr_cart') || '[]');
    const itemsContainer = document.getElementById('simpleCartItems');
    const totalElement = document.getElementById('simpleCartTotal');
    
    if (cart.length === 0) {
        itemsContainer.innerHTML = '<p style="text-align: center; color: #666; padding: 40px 0;">سبد خرید شما خالی است</p>';
    } else {
        itemsContainer.innerHTML = cart.map(item => `
            <div style="display: flex; gap: 10px; padding: 15px; border-bottom: 1px solid #eee; background: #f9f9f9; border-radius: 8px; margin-bottom: 10px;">
                <img src="${item.image}" width="60" height="60" style="object-fit: cover; border-radius: 6px;" 
                     onerror="this.src='https://via.placeholder.com/60x60?text=تصویر'">
                <div style="flex: 1;">
                    <div style="font-weight: bold; margin-bottom: 5px;">${item.name}</div>
                    <div style="color: #e91e63; font-weight: bold; margin-bottom: 5px;">${item.price.toLocaleString('fa-IR')} تومان</div>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <button onclick="changeQuantity(${item.id}, -1)" style="width: 25px; height: 25px; border: 1px solid #ddd; background: white; border-radius: 50%; cursor: pointer;">-</button>
                        <span style="font-weight: bold;">${item.quantity} عدد</span>
                        <button onclick="changeQuantity(${item.id}, 1)" style="width: 25px; height: 25px; border: 1px solid #ddd; background: white; border-radius: 50%; cursor: pointer;">+</button>
                        <button onclick="removeFromCart(${item.id})" style="margin-right: auto; background: #ff4444; color: white; border: none; padding: 2px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">حذف</button>
                    </div>
                </div>
            </div>
        `).join('');
        
        const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        totalElement.textContent = total.toLocaleString('fa-IR') + ' تومان';
    }
    
    // آپدیت شمارنده
    updateCartCounter();
}

function changeQuantity(productId, change) {
    let cart = JSON.parse(localStorage.getItem('sepahr_cart') || '[]');
    const itemIndex = cart.findIndex(item => item.id === productId);
    
    if (itemIndex !== -1) {
        cart[itemIndex].quantity += change;
        
        if (cart[itemIndex].quantity < 1) {
            cart.splice(itemIndex, 1);
        }
        
        localStorage.setItem('sepahr_cart', JSON.stringify(cart));
        updateSimpleCart();
        showNotification('سبد خرید به روز شد');
    }
}

function removeFromCart(productId) {
    let cart = JSON.parse(localStorage.getItem('sepahr_cart') || '[]');
    cart = cart.filter(item => item.id !== productId);
    localStorage.setItem('sepahr_cart', JSON.stringify(cart));
    updateSimpleCart();
    showNotification('محصول از سبد خرید حذف شد');
}

function updateCartCounter() {
    const cart = JSON.parse(localStorage.getItem('sepahr_cart') || '[]');
    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
    const cartCount = document.getElementById('cartCount');
    
    if (cartCount) {
        cartCount.textContent = totalItems;
        cartCount.style.display = totalItems > 0 ? 'flex' : 'none';
    }
}

function showNotification(message) {
    // ایجاد یک نوتیفیکیشن ساده
    const notification = document.createElement('div');
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: #4CAF50;
        color: white;
        padding: 15px 25px;
        border-radius: 10px;
        z-index: 10000;
        font-family: Vazirmatn;
    `;
    notification.textContent = message;
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.remove();
    }, 3000);
}

// وقتی صفحه لود شد
document.addEventListener('DOMContentLoaded', function() {
    // آپدیت شمارنده اولیه
    updateCartCounter();
    
    // کلیک روی آیکون سبد خرید
    const cartBtn = document.getElementById('cartBtn');
    if (cartBtn) {
        cartBtn.addEventListener('click', showSimpleCart);
    }
    
    // کلیک خارج از سبد خرید برای بستن
    document.addEventListener('click', function(e) {
        const cart = document.getElementById('simpleCart');
        if (cart && !cart.contains(e.target) && !e.target.closest('#cartBtn')) {
            closeSimpleCart();
        }
    });
});

// تابع عمومی برای افزودن به سبد خرید (در صفحات دیگر استفاده شود)
function addToCart(productId) {
    // ابتدا محصولات رو از localStorage بخون
    const products = JSON.parse(localStorage.getItem('sepahr_products') || '[]');
    const product = products.find(p => p.id == productId);
    
    if (!product) {
        showNotification('محصول یافت نشد!');
        return;
    }

    let cart = JSON.parse(localStorage.getItem('sepahr_cart') || '[]');
    const existingItem = cart.find(item => item.id == productId);

    if (existingItem) {
        existingItem.quantity += 1;
    } else {
        cart.push({
            ...product,
            quantity: 1
        });
    }
    
    localStorage.setItem('sepahr_cart', JSON.stringify(cart));
    updateCartCounter();
    showNotification('✅ به سبد خرید اضافه شد!');
    
    // اگر سبد خرید باز است، آپدیت کن
    if (document.getElementById('simpleCart').style.display === 'block') {
        updateSimpleCart();
    }
}
</script>

</body>
</html>


