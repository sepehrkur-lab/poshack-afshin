<div class="search-result-price">${this.formatPrice(product.price)} تومان</div>
                    </div>
                </div>
            ).join('');
            searchResults.style.display = 'block';
        } else {
            searchResults.innerHTML = '<div class="search-result-item">محصولی یافت نشد</div>';
            searchResults.style.display = 'block';
        }
    }

    // فرمت قیمت
    formatPrice(price) {
        return new Intl.NumberFormat('fa-IR').format(price);
    }

    // نمایش نوتیفیکیشن
    showNotification(message, type = 'success') {
        // ایجاد نوتیفیکیشن
        const notification = document.createElement('div');
        notification.style.cssText = 
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: ${type === 'success' ? '#48bb78' : type === 'error' ? '#e53e3e' : type === 'info' ? '#3182ce' : '#ed8936'};
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            z-index: 10000;
            font-family: Vazirmatn;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            max-width: 90%;
            text-align: center;
        `;
        notification.textContent = message;
        document.body.appendChild(notification);

        setTimeout(() => {
            notification.style.opacity = '0';
            setTimeout(() => notification.remove(), 300);
        }, 3000);
    }
}

// راه‌اندازی فروشگاه
document.addEventListener('DOMContentLoaded', () => {
    window.sepahrShop = new SepahrShop();
});

// توابع global برای استفاده در HTML
function addToCart(productId) {
    if (window.sepahrShop) {
        window.sepahrShop.addToCart(productId);
    }
}

function addToWishlist(productId) {
    if (window.sepahrShop) {
        window.sepahrShop.addToWishlist(productId);
    }
}

function formatPrice(price) {
    return new Intl.NumberFormat('fa-IR').format(price);
}

function updateCartCounter() {
    if (window.sepahrShop) {
        window.sepahrShop.updateCartUI();
    }
}

// تابع برای لود محصولات در صفحه محصولات
function loadProducts(category = null, discountOnly = false) {
    let products = getAllProducts();
    
    if (category) {
        products = getProductsByCategory(category);
    }
    
    if (discountOnly) {
        products = getDiscountedProducts();
    }
    
    return products;
}
